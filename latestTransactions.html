<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transaction with Metamask</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.6.1-rc.3/web3.min.js"
      integrity="sha512-0KTZZdA9E3vaLClQkC6S9roiHr9J2A79Q/BvcIwd8LjRVAQcwrT1zorS7hfZ7B3Nr/u6bYzNG/wXOAOADdJ7qQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <ul class="nav nav-tabs justify-content-center">
      <li class="nav-item">
        <a class="nav-link" href="index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="sendTransactions.html">Send Transaction</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="mintOrBurn.html">Mint / Burn Tokens</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="swap.html">Swap Tokens</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="latestTransactions.html">Latest Transactions</a>
      </li>
    </ul>

  </head>

  <body class="p-3 mb-2 bg-light">
    <div class="container justify-content-center justify-content-lg-center">
      <div class="text-center">
        <br />
        <!-- Title -->
        <h1 class="text-primary">Latest Transactions</h1>
        <!-- Sub Title -->
        <h5 class="mb-2 text-muted">
            Here you can see all the recent transactions you have made
        </h5>
        ---------------------------------------------------------------------------------------
      </div>
      <!-- Stat => Amount and Volume -->
      <div>
        <table style="margin-left: auto; margin-right: auto;" id="stat">
          <tr>
            <td><b>Amount:</b> loading... transfer/s</td>
          </tr>
          <tr>
            <td><b>Volume:</b> loading... HAD</td>
          </tr>
        </table>
      </div>

      <!------------------------------ Latest Transactions ------------------------------>
      <br />
        <div class="col-sm">
          <div class="card-header text-center text-primary">
            <b>Latest Transactions</b>
          </div>
          <div class="card text-center">
            <ul id="list">
              <p><script>
                var link;
                var action;
                Object.keys(localStorage).forEach(function(key) {
                  link = localStorage.getItem(key);
                  // split the existing values into an array
                  action = key.split('-');
                  if (!link.includes("metamask")) {
                    if (action[1] === "Mint") {
                      document
                      .getElementById("list")
                      .insertAdjacentHTML(
                        "afterbegin",
                        `<b style='color:green'>${action[1]}:</b> <a href=${link} target="_blank">${link}<br /></a>`
                      );
                    }
                    else if (action[1] === "Burn") {
                      document
                      .getElementById("list")
                      .insertAdjacentHTML(
                        "afterbegin",
                        `<b style='color:red'>${action[1]}:</b> <a href=${link} target="_blank">${link}<br /></a>`
                      );
                    }
                    else {
                      document
                      .getElementById("list")
                      .insertAdjacentHTML(
                        "afterbegin",
                        `<b>${action[1]}:</b> <a href=${link} target="_blank">${link}<br /></a>`
                      );
                    }
                  };
                });
              </script></p>
            </ul>
          </div>
        </div>
      </div>

      <br/><br/>
      <p style="text-align:center;"><img src="images/ethereum_latest.jpg" width="555" height="300" /></p>
      </div>
    <script src="index.js"></script>
  </body>
</html>
